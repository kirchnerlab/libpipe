#!/bin/bash

mkdir -p @LIBPIPE_BINARY_DIR@/coverage
gcovr -r @LIBPIPE_BINARY_DIR@ -f '.*libpipe' -e '.*test' -x > @LIBPIPE_BINARY_DIR@/coverage/coverage.xml
lcov --directory @LIBPIPE_BINARY_DIR@/test/CMakeFiles \
     --directory @LIBPIPE_BINARY_DIR@/src/CMakeFiles/pipe.dir \
     --directory @LIBPIPE_BINARY_DIR@/src/CMakeFiles \
     -capture --output-file @LIBPIPE_BINARY_DIR@/coverage/pipe.info
lcov --extract @LIBPIPE_BINARY_DIR@/coverage/pipe.info '*libpipe/src*' '*libpipe/include/libpipe*' -o @LIBPIPE_BINARY_DIR@/coverage/pipe.info.extracted
pushd @LIBPIPE_BINARY_DIR@/coverage/
genhtml --demangle-cpp pipe.info.extracted
popd
 
 
